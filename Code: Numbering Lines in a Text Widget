""" 
Tkinter adding line number to text widget

Inspired by: https://stackoverflow.com/questions/16369470/tkinter-adding-line-number-to-text-widget

Display line number for the Text widget in an adjacent frame.
Refactored to work with Notepad app.
""" 


from tkinter import *

root = Tk()
root.geometry("400x300")

text_frame = Frame(root)
text_frame.pack(fill=tk.BOTH, expand=True, padx=5, pady=5)

line_numbers = Text(text_frame, width=4, padx=5, pady=5, takefocus=0, border=0, background='light gray', state='disabled')
line_numbers.pack(side=LEFT, fill=Y)

text_widget = Text(text_frame, padx=5, pady=5, wrap=tk.WORD)
text_widget.pack(side=LEFT, fill=BOTH, expand=True)

def update_line_numbers(event=None):
    line_numbers.config(state='normal')
    line_numbers.delete('1.0', 'end')
    text_content = text_widget.get('1.0', 'end')
    line_count = text_content.count('\n') + 1
    line_number_text = '\n'.join(str(i) for i in range(1, line_count+1))
    line_numbers.insert('end', line_number_text)
    line_numbers.config(state='disabled')

text_widget.bind('<Key>', update_line_numbers)
text_widget.bind('<Button-1>', update_line_numbers)

def toggle_line_numbers():
    if show_line_numbers_var.get():
        text_widget.pack_forget()
        line_numbers.pack_forget()
        line_numbers.pack(side=LEFT, fill=Y)
        text_widget.pack(side=LEFT, fill=BOTH, expand=True)
        update_line_numbers()
    else:
        line_numbers.pack_forget()
        text_widget.pack_forget()
        text_widget.pack(side=LEFT, fill=BOTH, expand=True)
        update_line_numbers()

def create_widgets(master):
    menu = Menu(master)
    master.config(menu=menu)

    view_menu = Menu(menu, tearoff=False)
    menu.add_cascade(label="View", menu=view_menu)

    global show_line_numbers_var
    show_line_numbers_var = BooleanVar()
    show_line_numbers_var.set(True)

    view_menu.add_checkbutton(label="Line Numbers", variable=show_line_numbers_var, command=toggle_line_numbers)

create_widgets(root)

root.mainloop()
