"""
Tkinter adding line number to text widget
https://stackoverflow.com/questions/16369470/tkinter-adding-line-number-to-text-widget

Display line number for the Text widget in an adjacent frame.
Refactored into a class.
"""

class Example(tk.Frame):
    def __init__(self, *args, **kwargs):
        tk.Frame.__init__(self, *args, **kwargs)
        self.text = CustomText(self)
        self.vsb = tk.Scrollbar(self, orient="vertical", command=self.text.yview)
        self.text.configure(yscrollcommand=self.vsb.set)
        self.text.tag_configure("bigfont", font=("Helvetica", "24", "bold"))
        self.linenumbers = TextLineNumbers(self, width=30)
        self.linenumbers.attach(self.text)

        # Create a menu bar with a "View" menu and a "Show line numbers" checkbutton
        menubar = tk.Menu(self.master)
        self.master.config(menu=menubar)
        view_menu = tk.Menu(menubar)
        menubar.add_cascade(label="View", menu=view_menu)
        self.show_linenumbers_var = tk.BooleanVar()
        self.show_linenumbers_var.set(True)
        view_menu.add_checkbutton(label="Show line numbers", variable=self.show_linenumbers_var, command=self.toggle_linenumbers)

        self.vsb.pack(side="right", fill="y")
        self.linenumbers.pack(side="left", fill="y")
        self.text.pack(side="right", fill="both", expand=True)

        self.text.bind("<<Change>>", self._on_change)
        self.text.bind("<Configure>", self._on_change)

        self.text.insert("end", "one\ntwo\nthree\n")
        self.text.insert("end", "four\n",("bigfont",))
        self.text.insert("end", "five\n")

    def toggle_linenumbers(self):
        if self.show_linenumbers_var.get():
            self.linenumbers.pack(side="left", fill="y")
        else:
            self.linenumbers.pack_forget()

    def _on_change(self, event):
        self.linenumbers.redraw()

if __name__ == "__main__":
    root = tk.Tk()
    Example(root).pack(side="top", fill="both", expand=True)
    root.mainloop()

